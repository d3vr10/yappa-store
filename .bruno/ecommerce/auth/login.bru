meta {
  name: login
  type: http
  seq: 1
}

post {
  url: {{SERVER_URL}}/auth/login
  body: json
  auth: none
}

body:json {
  {
    "email": "{{USER_EMAIL_1}}",
    "password": "supergg!"
  }
}

script:post-response {
  const token = res.body.access_token
  
  if (!token) {
    console.error('No token detected')
    return
  }
  bru.setEnvVar('ACCESS_TOKEN', token)
  console.log(`Token Detected! saved into jwtToken envar: "${token.slice(0,10)}..."`)
}

settings {
  encodeUrl: true
}
